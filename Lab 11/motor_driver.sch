v 20100214 2
C 70100 44100 1 0 0 dc_motor-1.sym
{
T 70500 45100 5 10 0 0 0 0 1
device=DC_MOTOR
T 70600 44700 5 10 1 1 0 0 1
refdes=M1
}
C 69600 44200 1 90 0 diode-1.sym
{
T 69000 44600 5 10 0 0 90 0 1
device=DIODE
T 69100 44500 5 10 1 1 90 0 1
refdes=D5
T 68600 44900 5 10 1 1 0 0 1
value=RHR460
}
C 69800 42500 1 0 0 nmos-3.sym
{
T 70400 43000 5 10 0 0 0 0 1
device=NMOS_TRANSISTOR
T 70500 43100 5 10 1 1 0 0 1
refdes=Q7
}
N 70300 43300 70300 44100 4
N 70300 44100 69400 44100 4
N 69400 44100 69400 44200 4
N 69400 45100 70300 45100 4
N 70300 45100 70300 45500 4
C 70100 45500 1 0 0 vdd-1.sym
C 68200 41600 1 0 0 gnd-1.sym
C 67800 41900 1 0 0 nmos-3.sym
{
T 68400 42400 5 10 0 0 0 0 1
device=NMOS_TRANSISTOR
T 68500 42500 5 10 1 1 0 0 1
refdes=Q6
}
C 67800 44400 1 180 1 pmos-3.sym
{
T 68400 43900 5 10 0 0 180 6 1
device=PMOS_TRANSISTOR
T 68500 43800 5 10 1 1 180 6 1
refdes=Q5
}
C 68400 42700 1 90 0 resistor-1.sym
{
T 68000 43000 5 10 0 0 90 0 1
device=RESISTOR
T 68100 42900 5 10 1 1 90 0 1
refdes=R10
}
C 68100 44400 1 0 0 vdd-1.sym
C 70200 42200 1 0 0 gnd-1.sym
N 69800 42700 68300 42700 4
N 67800 44200 67500 44200 4
N 67500 42100 67500 44200 4
N 67500 42100 67800 42100 4
C 67900 33800 1 0 0 npn-3.sym
{
T 68800 34300 5 10 0 0 0 0 1
device=NPN_TRANSISTOR
T 68800 34300 5 10 1 1 0 0 1
refdes=Q3
}
C 15900 48200 1 180 1 pnp-3.sym
{
T 16800 47700 5 10 0 0 180 6 1
device=PNP_TRANSISTOR
T 16800 47700 5 10 1 1 180 6 1
refdes=Q4
}
C 16300 45800 1 270 1 capacitor-1.sym
{
T 17000 46000 5 10 0 0 90 2 1
device=CAPACITOR
T 16800 46000 5 10 1 1 90 2 1
refdes=C2
T 17200 46000 5 10 0 0 90 2 1
symversion=0.1
}
C 15400 46800 1 270 1 resistor-1.sym
{
T 15800 47100 5 10 0 0 90 2 1
device=RESISTOR
T 15700 47000 5 10 1 1 90 2 1
refdes=R5
}
C 16400 48200 1 270 1 resistor-1.sym
{
T 16800 48500 5 10 0 0 90 2 1
device=RESISTOR
T 16700 48400 5 10 1 1 90 2 1
refdes=R4
}
C 15700 48600 1 90 1 diode-1.sym
{
T 15100 48200 5 10 0 0 270 2 1
device=DIODE
T 15200 48300 5 10 1 1 270 2 1
refdes=D4
}
C 15700 49500 1 90 1 diode-1.sym
{
T 15100 49100 5 10 0 0 270 2 1
device=DIODE
T 15200 49200 5 10 1 1 270 2 1
refdes=D3
}
C 15700 49500 1 0 1 vdd-1.sym
C 16600 44900 1 0 1 gnd-1.sym
N 15500 45200 17500 45200 4
N 15500 47700 15900 47700 4
N 15500 49500 16500 49500 4
N 16500 49500 16500 49100 4
N 16500 46700 16500 47200 4
C 67500 34300 1 90 1 diode-1.sym
{
T 66900 33900 5 10 0 0 270 2 1
device=DIODE
T 67000 34000 5 10 1 1 270 2 1
refdes=D1
}
C 67500 33400 1 90 1 diode-1.sym
{
T 66900 33000 5 10 0 0 270 2 1
device=DIODE
T 67000 33100 5 10 1 1 270 2 1
refdes=D2
}
N 67900 34300 67300 34300 4
C 68300 35200 1 270 1 capacitor-1.sym
{
T 69000 35400 5 10 0 0 90 2 1
device=CAPACITOR
T 68800 35400 5 10 1 1 90 2 1
refdes=C1
T 69200 35400 5 10 0 0 90 2 1
symversion=0.1
}
C 68700 36600 1 0 1 vdd-1.sym
C 67200 34600 1 270 1 resistor-1.sym
{
T 67600 34900 5 10 0 0 90 2 1
device=RESISTOR
T 67500 34800 5 10 1 1 90 2 1
refdes=R1
}
C 68400 32500 1 270 1 resistor-1.sym
{
T 68800 32800 5 10 0 0 90 2 1
device=RESISTOR
T 68700 32700 5 10 1 1 90 2 1
refdes=R3
}
C 68600 32200 1 0 1 gnd-1.sym
N 67300 36600 69700 36600 4
N 68500 33800 68500 33400 4
N 67300 34600 67300 34300 4
N 67300 32500 68500 32500 4
N 68500 35200 68500 34800 4
C 70300 36100 1 180 0 pnp-3.sym
{
T 69400 35600 5 10 0 0 180 0 1
device=PNP_TRANSISTOR
T 69400 35600 5 10 1 1 180 0 1
refdes=Q2
}
N 69700 35100 69700 35000 4
N 69700 35000 68500 35000 4
C 71200 35500 1 0 1 resistor-1.sym
{
T 70900 35900 5 10 0 0 180 2 1
device=RESISTOR
T 71000 35800 5 10 1 1 180 2 1
refdes=R2
}
C 66700 36600 1 180 1 pnp-3.sym
{
T 67600 36100 5 10 0 0 180 6 1
device=PNP_TRANSISTOR
T 67600 36100 5 10 1 1 180 6 1
refdes=Q1
}
N 68500 36600 68500 36100 4
N 67300 35500 67300 35600 4
N 69700 36600 69700 36100 4
N 17500 46800 17500 46900 4
N 16500 46900 19000 46900 4
N 16500 45200 16500 45800 4
C 18100 45200 1 90 0 4066-2.sym
{
T 17050 45500 5 10 0 0 90 0 1
device=4066
T 17200 46500 5 10 1 1 90 6 1
refdes=U1
T 16850 45500 5 10 0 0 90 0 1
footprint=DIP14
T 18100 45200 5 10 0 0 0 0 1
slot=1
}
C 19000 46300 1 0 0 lm324-1.sym
{
T 19825 46450 5 8 0 0 0 0 1
device=LM324
T 19200 47200 5 10 1 1 0 0 1
refdes=U2
}
N 19000 46500 19000 45900 4
N 19000 45900 21700 45900 4
N 21700 45900 21700 46700 4
C 20100 46100 1 0 0 4066-2.sym
{
T 20400 47150 5 10 0 0 0 0 1
device=4066
T 21400 47000 5 10 1 1 0 6 1
refdes=U1
T 20400 47350 5 10 0 0 0 0 1
footprint=DIP14
T 20100 46100 5 10 0 0 270 0 1
slot=2
}
C 21900 45800 1 270 1 capacitor-1.sym
{
T 22600 46000 5 10 0 0 90 2 1
device=CAPACITOR
T 22400 46000 5 10 1 1 90 2 1
refdes=C4
T 22800 46000 5 10 0 0 90 2 1
symversion=0.1
}
N 21700 46700 23300 46700 4
N 20100 46700 20000 46700 4
C 19600 46000 1 0 1 gnd-1.sym
C 19700 47100 1 0 1 vdd-1.sym
C 22200 45500 1 0 1 gnd-1.sym
C 23300 46100 1 0 0 lm324-1.sym
{
T 24125 46250 5 8 0 0 0 0 1
device=LM324
T 23300 46100 5 10 0 0 0 0 1
slot=2
}
C 23900 45800 1 0 1 gnd-1.sym
C 24000 46900 1 0 1 vdd-1.sym
N 23300 46300 23000 46300 4
N 23000 46300 23000 45600 4
N 23000 45600 24600 45600 4
N 24600 45600 24600 46500 4
N 25000 46500 24300 46500 4
N 15500 46800 15500 45200 4
C 13800 43500 1 0 0 input-1.sym
{
T 13800 43800 5 10 0 0 0 0 1
device=INPUT
T 12300 43500 5 10 1 1 0 0 1
netname=Encoder Sq Wave
}
C 25000 46400 1 0 0 output-1.sym
{
T 25100 46700 5 10 0 0 0 0 1
device=OUTPUT
T 25100 46700 5 10 1 1 0 0 1
netname=Speed (Analog Voltage)
T 25200 46100 5 10 1 1 0 0 1
documentation=0-10 V (1mV/RPM)
}
N 19800 43600 19800 46300 4
N 17900 45200 17900 44700 4
C 16300 43400 1 0 1 capacitor-1.sym
{
T 16100 44100 5 10 0 0 180 2 1
device=CAPACITOR
T 15700 43300 5 10 1 1 180 2 1
refdes=C3
T 16100 44300 5 10 0 0 180 2 1
symversion=0.1
}
C 16400 42400 1 0 1 gnd-1.sym
C 16400 43600 1 90 1 resistor-1.sym
{
T 16000 43300 5 10 0 0 270 2 1
device=RESISTOR
T 16100 43400 5 10 1 1 270 2 1
refdes=R6
}
N 17900 44700 22900 44700 4
N 22900 41700 22900 44700 4
N 18500 43600 18500 41700 4
C 19400 41500 1 0 1 capacitor-1.sym
{
T 19200 42200 5 10 0 0 180 2 1
device=CAPACITOR
T 18800 41400 5 10 1 1 180 2 1
refdes=C5
T 19200 42400 5 10 0 0 180 2 1
symversion=0.1
}
C 19500 41700 1 90 1 resistor-1.sym
{
T 19100 41400 5 10 0 0 270 2 1
device=RESISTOR
T 19200 41500 5 10 1 1 270 2 1
refdes=R8
}
C 19500 40500 1 0 1 gnd-1.sym
C 16300 43700 1 180 1 resistor-1.sym
{
T 16600 43300 5 10 0 0 0 2 1
device=RESISTOR
T 16500 43400 5 10 1 1 0 2 1
refdes=R7
}
C 19400 41800 1 180 1 resistor-1.sym
{
T 19700 41400 5 10 0 0 0 2 1
device=RESISTOR
T 19600 41500 5 10 1 1 0 2 1
refdes=R9
}
T 15300 40300 9 10 1 0 0 0 2
Note: switched enable signals to U1 gates.
Previously was dump, then sample. Now, is sample, then dump
B 14600 40100 10400 10400 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
T 18800 49400 9 10 1 0 0 0 1
Speed measurement
B 66300 31100 5400 6900 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
T 69000 37400 9 10 1 0 0 0 1
???
B 67000 41200 4200 5300 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
T 68400 46200 9 10 1 0 0 0 1
Motor Drive
N 67500 43200 67000 43200 4
C 66200 43100 1 0 0 input-1.sym
{
T 66200 43400 5 10 0 0 0 0 1
device=INPUT
T 65500 43100 5 10 1 1 0 0 1
netname=PWM in
}
N 14600 43600 15400 43600 4
C 52900 50100 1 180 1 lm339-2.sym
{
T 53800 48300 5 8 0 0 180 6 1
device=LM339
T 53400 49400 5 10 1 1 180 6 1
refdes=U1
T 52900 50100 5 10 0 0 0 0 1
slot=2
}
C 52900 47800 1 180 1 lm339-2.sym
{
T 53800 46000 5 8 0 0 180 6 1
device=LM339
T 53100 46900 5 10 1 1 180 6 1
refdes=U1
T 52900 47800 5 10 0 0 0 0 1
slot=1
}
C 52000 49400 1 0 0 resistor-1.sym
{
T 52300 49800 5 10 0 0 0 0 1
device=RESISTOR
T 52200 49700 5 10 1 1 0 0 1
refdes=R4
T 52100 49100 5 10 1 1 0 0 1
value=1 kΩ
}
C 52900 48600 1 0 0 resistor-1.sym
{
T 53200 49000 5 10 0 0 0 0 1
device=RESISTOR
T 53100 48900 5 10 1 1 0 0 1
refdes=R7
T 53000 48400 5 10 1 1 0 0 1
value=100 kΩ
}
C 54700 47400 1 90 0 resistor-1.sym
{
T 54300 47700 5 10 0 0 90 0 1
device=RESISTOR
T 54400 47600 5 10 1 1 90 0 1
refdes=R11
T 54700 47700 5 10 1 1 0 0 1
value=10 kΩ
}
C 54300 49700 1 90 0 resistor-1.sym
{
T 53900 50000 5 10 0 0 90 0 1
device=RESISTOR
T 54000 49900 5 10 1 1 90 0 1
refdes=R6
T 54300 50100 5 10 1 1 0 0 1
value=10 kΩ
}
N 53900 49700 58500 49700 4
N 53900 47400 58500 47400 4
N 53800 48700 54200 48700 4
N 54200 48700 54200 49700 4
N 52900 48700 52900 49500 4
N 50400 47600 52900 47600 4
N 52200 47200 52900 47200 4
C 50600 44400 1 90 0 capacitor-1.sym
{
T 49900 44600 5 10 0 0 90 0 1
device=CAPACITOR
T 50100 44600 5 10 1 1 90 0 1
refdes=C1
T 49700 44600 5 10 0 0 90 0 1
symversion=0.1
T 50600 45000 5 10 1 1 0 0 1
value=0.022u
T 46500 45000 5 10 1 1 0 0 1
documentation=Switch to .1u Cap for 3kHz Operation in Part 2
}
N 50400 45300 50400 49500 4
N 50400 45300 56000 45300 4
C 48300 47300 1 270 0 zener-3.sym
{
T 49700 47900 5 10 0 0 270 0 1
device=ZENER_DIODE
T 48750 46800 5 10 1 1 90 0 1
refdes=Z1
T 47800 46800 5 10 1 1 0 0 1
value=10.1V
T 47500 46400 5 10 1 1 0 0 1
comment=I=~20mA
}
C 52000 46900 1 270 0 diode-1.sym
{
T 52600 46500 5 10 0 0 270 0 1
device=DIODE
T 52500 46600 5 10 1 1 270 0 1
refdes=D3
}
C 52100 45700 1 0 0 gnd-1.sym
C 52300 47200 1 90 0 resistor-1.sym
{
T 51900 47500 5 10 0 0 90 0 1
device=RESISTOR
T 52000 47400 5 10 1 1 90 0 1
refdes=R5
T 52300 47600 5 10 1 1 0 0 1
value=2.2k
}
C 52000 48100 1 0 0 vcc-1.sym
C 50300 44100 1 0 0 gnd-1.sym
C 47500 51800 1 270 0 diode-1.sym
{
T 48100 51400 5 10 0 0 270 0 1
device=DIODE
T 48000 51500 5 10 1 1 270 0 1
refdes=D1
}
C 47500 50900 1 270 0 diode-1.sym
{
T 48100 50500 5 10 0 0 270 0 1
device=DIODE
T 48000 50600 5 10 1 1 270 0 1
refdes=D2
}
N 49800 50000 47700 50000 4
C 47800 49100 1 90 0 resistor-1.sym
{
T 47400 49400 5 10 0 0 90 0 1
device=RESISTOR
T 47500 49300 5 10 1 1 90 0 1
refdes=R2
T 47800 49500 5 10 1 1 0 0 1
value=1k
}
C 47600 48800 1 0 0 gnd-1.sym
C 50500 50500 1 90 0 resistor-1.sym
{
T 50100 50800 5 10 0 0 90 0 1
device=RESISTOR
T 50200 50700 5 10 1 1 90 0 1
refdes=R1
T 50500 50500 5 10 1 1 0 0 1
value=470
}
C 50200 51800 1 0 0 vcc-1.sym
N 50400 51800 50400 51400 4
N 47700 51800 50400 51800 4
C 56600 44300 1 0 1 npn-3.sym
{
T 55700 44800 5 10 0 0 0 6 1
device=NPN_TRANSISTOR
T 55700 44800 5 10 1 1 0 6 1
refdes=Q2
}
C 55900 44000 1 0 0 gnd-1.sym
N 57500 45100 61100 45100 4
N 52200 47200 52200 46900 4
C 54600 44100 1 180 1 lm339-2.sym
{
T 55500 42300 5 8 0 0 180 6 1
device=LM339
T 54800 43200 5 10 1 1 180 6 1
refdes=U1
T 54600 44100 5 10 0 0 0 0 1
slot=3
}
C 53700 43400 1 0 0 resistor-1.sym
{
T 54000 43800 5 10 0 0 0 0 1
device=RESISTOR
T 53900 43700 5 10 1 1 0 0 1
refdes=R14
T 54000 43200 5 10 1 1 0 0 1
value=10k
}
C 54700 42500 1 0 0 resistor-1.sym
{
T 55000 42900 5 10 0 0 0 0 1
device=RESISTOR
T 54900 42800 5 10 1 1 0 0 1
refdes=R16
T 55000 42200 5 10 1 1 0 0 1
value=1M
}
N 54600 43500 54600 42600 4
N 54600 42600 54700 42600 4
N 55900 43700 55900 42600 4
N 51200 43500 53700 43500 4
N 51200 43500 51200 45300 4
N 55600 43700 57700 43700 4
N 55600 42600 55900 42600 4
C 58100 44600 1 0 0 vcc-1.sym
C 63600 43100 1 0 0 output-1.sym
{
T 63700 43400 5 10 0 0 0 0 1
device=OUTPUT
T 64500 43100 5 10 1 1 0 0 1
netname=pwm_out
T 64300 42800 5 10 1 1 0 0 1
description=15.5kHz
}
N 58300 43200 63600 43200 4
C 58400 42300 1 90 0 resistor-1.sym
{
T 58000 42600 5 10 0 0 90 0 1
device=RESISTOR
T 58100 42500 5 10 1 1 90 0 1
refdes=R19
T 58400 42600 5 10 1 1 0 0 1
value=1 kΩ
}
C 57700 43200 1 0 0 npn-3.sym
{
T 58600 43700 5 10 0 0 0 0 1
device=NPN_TRANSISTOR
T 58600 43700 5 10 1 1 0 0 1
refdes=Q4
}
C 58200 42000 1 0 0 gnd-1.sym
C 57800 43700 1 90 0 resistor-1.sym
{
T 57400 44000 5 10 0 0 90 0 1
device=RESISTOR
T 57500 43900 5 10 1 1 90 0 1
refdes=R17
T 57800 44100 5 10 1 1 0 0 1
value=10k
}
N 58300 44600 58300 44200 4
N 57700 44600 58300 44600 4
N 57500 44800 57500 45100 4
C 54800 41700 1 90 0 capacitor-1.sym
{
T 54100 41900 5 10 0 0 90 0 1
device=CAPACITOR
T 54300 41900 5 10 1 1 90 0 1
refdes=C2
T 53900 41900 5 10 0 0 90 0 1
symversion=0.1
T 54800 41700 5 10 1 1 0 0 1
value=47pF
}
C 44800 43800 1 0 0 input-1.sym
{
T 44800 44100 5 10 0 0 0 0 1
device=INPUT
T 44300 43900 5 10 1 1 0 0 1
netname=v_ctrl
T 44400 43600 5 10 1 1 0 0 1
description=0-5V
}
N 45600 43900 54600 43900 4
C 54500 41400 1 0 0 gnd-1.sym
C 49800 50500 1 180 1 pnp-3.sym
{
T 50700 50000 5 10 0 0 180 6 1
device=PNP_TRANSISTOR
T 50700 50000 5 10 1 1 180 6 1
refdes=Q1
}
B 46000 41100 17600 12000 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
T 53900 52500 9 10 1 0 0 0 1
PWM Generator
N 58500 49300 59800 47600 4
N 58500 47800 59800 49500 4
C 47800 50500 1 180 1 pnp-3.sym
{
T 48700 50000 5 10 0 0 180 6 1
device=PNP_TRANSISTOR
T 48700 50000 5 10 1 1 180 6 1
refdes=Q?
}
N 48400 51400 48400 51800 4
C 48500 50500 1 90 0 resistor-1.sym
{
T 48100 50800 5 10 0 0 90 0 1
device=RESISTOR
T 48200 50700 5 10 1 1 90 0 1
refdes=R3
T 48600 50900 5 10 1 1 0 0 1
value=39
}
N 48400 49500 48400 47300 4
C 48300 46200 1 0 0 gnd-1.sym
N 52000 49500 50400 49500 4
C 48700 47800 1 180 1 pnp-3.sym
{
T 49600 47300 5 10 0 0 180 6 1
device=PNP_TRANSISTOR
T 48600 47800 5 10 1 1 180 6 1
refdes=Q?
}
C 49600 47800 1 0 0 generic-power.sym
{
T 49800 48050 5 10 1 1 0 3 1
net=+10.7
}
C 49400 47800 1 90 0 resistor-1.sym
{
T 49000 48100 5 10 0 0 90 0 1
device=RESISTOR
T 49100 47900 5 10 1 1 90 0 1
refdes=R?
}
N 49300 47800 49900 47800 4
C 49100 48700 1 0 0 vcc-1.sym
C 49200 45600 1 0 0 gnd-1.sym
N 48700 47300 48400 47300 4
N 52900 49900 51200 49900 4
N 51200 46900 51200 49900 4
C 58500 49000 1 0 0 4001-1.sym
{
T 59100 49900 5 10 0 0 0 0 1
device=4001
T 58750 49900 5 10 1 1 0 0 1
refdes=U?
T 59100 51300 5 10 0 0 0 0 1
footprint=DIP14
}
C 58500 47100 1 0 0 4001-1.sym
{
T 59100 48000 5 10 0 0 0 0 1
device=4001
T 58750 48000 5 10 1 1 0 0 1
refdes=U?
T 59100 49400 5 10 0 0 0 0 1
footprint=DIP14
}
N 59800 49500 61100 49500 4
N 61100 49500 61100 45100 4
C 56600 44700 1 0 0 resistor-1.sym
{
T 56900 45100 5 10 0 0 0 0 1
device=RESISTOR
T 56800 45000 5 10 1 1 0 0 1
refdes=R?
T 57000 44500 5 10 1 1 0 0 1
value=1k
}
C 54400 48300 1 0 0 generic-power.sym
{
T 54600 48550 5 10 1 1 0 3 1
net=+10.7
}
C 54000 50600 1 0 0 generic-power.sym
{
T 54200 50850 5 10 1 1 0 3 1
net=+10.7
}
C 50000 46900 1 90 0 resistor-1.sym
{
T 49600 47200 5 10 0 0 90 0 1
device=RESISTOR
T 49700 47100 5 10 1 1 90 0 1
refdes=R?
T 50000 47100 5 10 1 1 0 0 1
value=39k
}
C 50000 46000 1 90 0 resistor-1.sym
{
T 49600 46300 5 10 0 0 90 0 1
device=RESISTOR
T 49700 46200 5 10 1 1 90 0 1
refdes=R?
T 50000 46000 5 10 1 1 0 0 1
value=33k
}
N 49300 45900 49300 46800 4
N 49900 46000 49900 45900 4
N 49900 45900 49300 45900 4
N 49900 46900 51200 46900 4
T 57500 50300 9 10 1 0 0 0 1
4000 Series parts need Vcc<15 V. Power off 10.7V rail.
B 5100 42300 6100 5200 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
C 5900 45100 1 270 0 led-2.sym
{
T 6200 44300 5 10 1 1 270 0 1
refdes=D?
T 6500 45000 5 10 0 0 270 0 1
device=LED
T 5600 44600 5 10 1 1 0 0 1
description=IR
}
C 6800 44400 1 0 0 photo-transistor-1.sym
{
T 6600 44900 5 6 0 1 0 0 1
device=PS2501-1
T 7060 44500 5 10 1 1 0 0 1
refdes=Q?
T 6760 44400 5 10 0 1 0 0 1
device=photo-transistor
T 7100 44200 5 10 1 1 0 0 1
value=PT204
}
N 6000 44200 7000 44200 4
N 7000 44200 7000 44400 4
C 6100 45100 1 90 0 resistor-1.sym
{
T 5700 45400 5 10 0 0 90 0 1
device=RESISTOR
T 5800 45300 5 10 1 1 90 0 1
refdes=R?
T 6100 45100 5 10 1 1 0 0 1
value=470
}
C 7100 45100 1 90 0 resistor-1.sym
{
T 6700 45400 5 10 0 0 90 0 1
device=RESISTOR
T 6800 45300 5 10 1 1 90 0 1
refdes=R?
T 7100 45200 5 10 1 1 0 0 1
value=1k
}
N 7000 44800 7000 45100 4
N 6000 46000 7000 46000 4
N 6500 46000 6500 46600 4
C 6300 46600 1 0 0 vcc-1.sym
C 6400 43900 1 0 0 gnd-1.sym
T 6000 47100 9 10 1 0 0 0 1
Optical Encoder
C 11200 45100 1 0 0 output-1.sym
{
T 11300 45400 5 10 0 0 0 0 1
device=OUTPUT
T 11500 45400 5 10 1 1 0 0 1
netname=encoder_out
T 11500 44800 5 10 1 1 0 0 1
description=Square Wave (.4V Low, 10.7 High)
}
C 17200 43100 1 0 0 4093-1.sym
{
T 17500 45400 5 10 0 0 0 0 1
device=4093
T 17500 44000 5 10 1 1 0 0 1
refdes=U?
T 17500 45600 5 10 0 0 0 0 1
footprint=DIP14
}
C 18500 43100 1 0 0 4093-1.sym
{
T 18800 45400 5 10 0 0 0 0 1
device=4093
T 18800 44000 5 10 1 1 0 0 1
refdes=U?
T 18800 45600 5 10 0 0 0 0 1
footprint=DIP14
}
C 20300 41200 1 0 0 4093-1.sym
{
T 20600 43500 5 10 0 0 0 0 1
device=4093
T 20600 42100 5 10 1 1 0 0 1
refdes=U?
T 20600 43700 5 10 0 0 0 0 1
footprint=DIP14
T 20300 41200 5 10 0 1 0 0 1
slot=3
}
C 21600 41200 1 0 0 4093-1.sym
{
T 21900 43500 5 10 0 0 0 0 1
device=4093
T 21900 42100 5 10 1 1 0 0 1
refdes=U?
T 21900 43700 5 10 0 0 0 0 1
footprint=DIP14
T 21600 41200 5 10 0 1 0 0 1
slot=4
}
N 18500 43400 18500 43800 4
N 21600 41900 21600 41500 4
N 20100 46300 19800 46300 4
N 17200 43800 17200 43400 4
N 20300 41500 20300 41900 4
C 9100 44800 1 0 0 lm339-1.sym
{
T 9925 44950 5 8 0 0 0 0 1
device=LM339
T 9300 45700 5 10 1 1 0 0 1
refdes=U?
T 10000 46625 5 8 0 0 0 0 1
symversion=1.0
}
C 9100 46000 1 0 0 resistor-1.sym
{
T 9400 46400 5 10 0 0 0 0 1
device=RESISTOR
T 9300 46300 5 10 1 1 0 0 1
refdes=R?
T 9700 46300 5 10 1 1 0 0 1
value=10k
}
C 8200 45300 1 0 0 resistor-1.sym
{
T 8500 45700 5 10 0 0 0 0 1
device=RESISTOR
T 8400 45600 5 10 1 1 0 0 1
refdes=R?
T 8800 45600 5 10 1 1 0 0 1
value=1k
}
C 8600 44000 1 90 0 resistor-1.sym
{
T 8200 44300 5 10 0 0 90 0 1
device=RESISTOR
T 8300 44200 5 10 1 1 90 0 1
refdes=R?
T 8600 44300 5 10 1 1 0 0 1
value=10k
}
C 8600 43100 1 90 0 resistor-1.sym
{
T 8200 43400 5 10 0 0 90 0 1
device=RESISTOR
T 8300 43300 5 10 1 1 90 0 1
refdes=R?
T 8600 43300 5 10 1 1 0 0 1
value=10k
}
N 10100 45200 11200 45200 4
N 9100 45400 9100 46100 4
N 10000 46100 10800 46100 4
N 10100 46100 10100 45200 4
C 10900 46100 1 90 0 resistor-1.sym
{
T 10500 46400 5 10 0 0 90 0 1
device=RESISTOR
T 10600 46300 5 10 1 1 90 0 1
refdes=R?
T 10900 46400 5 10 1 1 0 0 1
value=1k
}
C 10600 47000 1 0 0 generic-power.sym
{
T 10800 47250 5 10 1 1 0 3 1
net=+10.7
}
N 9100 45000 9100 44000 4
N 9100 44000 8500 44000 4
C 8300 44900 1 0 0 vcc-1.sym
C 8400 42800 1 0 0 gnd-1.sym
N 8200 45400 7700 45400 4
N 7000 45100 7700 45100 4
N 7700 45100 7700 45400 4
C 9400 45600 1 0 0 vcc-1.sym
C 9500 44500 1 0 0 gnd-1.sym
C 32500 47400 1 0 0 lm324-1.sym
{
T 33325 47550 5 8 0 0 0 0 1
device=LM324
T 32500 48400 5 10 1 1 0 0 1
refdes=U1
T 32500 47400 5 10 0 0 0 6 1
slot=2
}
N 36300 47800 33500 47800 4
C 32800 48200 1 0 0 vcc-1.sym
C 32900 47100 1 0 0 gnd-1.sym
N 34500 43900 34500 47800 4
C 36100 44200 1 0 0 lm324-1.sym
{
T 36925 44350 5 8 0 0 0 0 1
device=LM324
T 36100 45200 5 10 1 1 0 0 1
refdes=U1
T 36100 44200 5 10 0 0 0 6 1
slot=1
}
C 37000 43000 1 0 1 capacitor-1.sym
{
T 36800 43700 5 10 0 0 0 6 1
device=CAPACITOR
T 36800 43500 5 10 1 1 0 6 1
refdes=C1
T 36800 43900 5 10 0 0 0 6 1
symversion=0.1
T 37000 42800 5 10 1 1 0 6 1
value=0.47u
}
N 37700 44600 37100 44600 4
N 37000 43200 37100 43200 4
N 37100 43200 37100 44600 4
C 32500 47500 1 0 1 resistor-1.sym
{
T 32200 47900 5 10 0 0 0 6 1
device=RESISTOR
T 32500 47300 5 10 1 1 0 6 1
refdes=R6
T 32200 47300 5 10 1 1 0 6 1
value=100k
}
C 33800 44300 1 0 1 resistor-1.sym
{
T 33500 44700 5 10 0 0 0 6 1
device=RESISTOR
T 33600 44600 5 10 1 1 0 6 1
refdes=R8
T 33500 44100 5 10 1 1 0 6 1
value=100k
}
N 31600 47600 31500 47600 4
N 31500 47600 31500 46400 4
C 29800 43900 1 270 1 resistor-1.sym
{
T 30200 44200 5 10 0 0 90 2 1
device=RESISTOR
T 30100 44100 5 10 1 1 90 2 1
refdes=R10
T 29600 44100 5 10 1 1 0 6 1
value=10k
}
C 29800 43600 1 0 0 gnd-1.sym
C 36500 43900 1 0 0 gnd-1.sym
C 36400 45000 1 0 0 vcc-1.sym
N 41400 47600 39600 47600 4
N 32500 47600 32500 44400 4
N 32500 44400 32900 44400 4
C 30300 47900 1 0 1 resistor-1.sym
{
T 30000 48300 5 10 0 0 0 6 1
device=RESISTOR
T 30100 48200 5 10 1 1 0 6 1
refdes=R4
T 29800 48200 5 10 1 1 0 6 1
value=100k
}
N 32500 48000 30300 48000 4
C 29800 44800 1 270 1 resistor-1.sym
{
T 30200 45100 5 10 0 0 90 2 1
device=RESISTOR
T 30100 45000 5 10 1 1 90 2 1
refdes=R?
T 29800 45300 5 10 1 1 0 6 1
value=10k
}
C 29700 45700 1 0 0 vcc-1.sym
N 36100 43200 36100 44400 4
N 36100 44800 29900 44800 4
N 34500 44400 33800 44400 4
C 30700 45200 1 270 1 resistor-1.sym
{
T 31100 45500 5 10 0 0 90 2 1
device=RESISTOR
T 31000 45400 5 10 1 1 90 2 1
refdes=R?
T 30700 45200 5 10 1 1 0 6 1
value=100k
}
N 30800 46100 30800 48000 4
N 30800 45200 30800 44800 4
C 38600 47200 1 0 0 lm324-1.sym
{
T 39425 47350 5 8 0 0 0 0 1
device=LM324
T 39400 48000 5 10 1 1 0 0 1
refdes=U1
T 38600 47200 5 10 0 0 0 6 1
slot=4
}
C 35400 44500 1 180 0 pot-2.sym
{
T 34600 43600 5 10 0 0 180 0 1
device=VARIABLE_RESISTOR
T 34800 44100 5 10 1 1 180 0 1
refdes=R?
T 34600 43000 5 10 0 0 180 0 1
footprint=none
T 35400 44500 5 10 1 1 0 6 1
value=1M
}
N 36100 44400 35400 44400 4
N 34900 43900 34500 43900 4
C 38900 48000 1 0 0 vcc-1.sym
C 39000 46900 1 0 0 gnd-1.sym
C 37200 47700 1 0 1 resistor-1.sym
{
T 36900 48100 5 10 0 0 0 6 1
device=RESISTOR
T 37000 48000 5 10 1 1 0 6 1
refdes=R?
T 37000 47400 5 10 1 1 0 6 1
value=100k
}
C 38600 44500 1 0 1 resistor-1.sym
{
T 38300 44900 5 10 0 0 0 6 1
device=RESISTOR
T 38400 44800 5 10 1 1 0 6 1
refdes=R?
T 38300 44300 5 10 1 1 0 6 1
value=100k
}
N 38600 47400 38600 44600 4
C 39500 44500 1 0 1 resistor-1.sym
{
T 39200 44900 5 10 0 0 0 6 1
device=RESISTOR
T 39300 44800 5 10 1 1 0 6 1
refdes=R?
T 39300 44300 5 10 1 1 0 6 1
value=100k
}
C 37900 46600 1 0 0 gnd-1.sym
C 37900 46900 1 270 1 resistor-1.sym
{
T 38300 47200 5 10 0 0 90 2 1
device=RESISTOR
T 38200 47100 5 10 1 1 90 2 1
refdes=R?
T 37900 46900 5 10 1 1 0 6 1
value=100k
}
N 38600 47800 37200 47800 4
N 39500 44600 39600 44600 4
C 41700 47800 1 0 0 vcc-1.sym
C 41800 46700 1 0 0 gnd-1.sym
C 41400 47000 1 0 0 lm324-1.sym
{
T 41400 48000 5 10 1 1 0 0 1
refdes=U1
T 42225 47150 5 8 0 0 0 0 1
device=LM324
T 41400 47000 5 10 0 0 0 6 1
slot=3
}
N 41400 46600 41400 47200 4
C 40800 45800 1 0 0 gnd-1.sym
N 42400 47400 42400 46100 4
N 41800 46100 42400 46100 4
N 39600 47600 39600 44600 4
T 35800 48000 9 10 1 0 0 6 2
E
centered around 1/2 supply
T 39400 43200 9 10 1 0 0 6 2
-kI * I
centered around 1/2 supply
T 35400 43500 9 10 1 0 0 6 1
Ki (1->infinite)
T 41300 46900 9 10 1 0 0 6 3
Error + Integral Error
centered around 0
(will only be positive)
T 40400 48500 9 10 1 0 0 6 2
Diff Amp
Sums I and P terms and rejects common mode
T 42000 48400 9 10 1 0 0 6 1
K gain
T 35800 50200 9 10 1 0 0 0 1
PI Controller
B 28300 41000 15600 9800 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
C 27500 46300 1 0 0 input-1.sym
{
T 27500 46600 5 10 0 0 0 0 1
device=INPUT
T 27200 46600 5 10 1 1 0 0 1
netname=speed
}
C 27500 48700 1 0 0 input-1.sym
{
T 27500 49000 5 10 0 0 0 0 1
device=INPUT
T 26800 48900 5 10 1 1 0 0 1
netname=setpoint
T 27000 48500 5 10 1 1 0 0 1
documentation=0-7V
}
N 26500 48000 29400 48000 4
N 28800 48000 28800 48800 4
N 28300 48800 28800 48800 4
N 31500 46400 28300 46400 4
C 43900 47300 1 0 0 output-1.sym
{
T 44000 47600 5 10 0 0 0 0 1
device=OUTPUT
T 44900 47300 5 10 1 1 0 0 1
netname=v_ctrl
}
N 43900 47400 42400 47400 4
C 40900 46000 1 0 0 pot-1.sym
{
T 41700 46900 5 10 0 0 0 0 1
device=VARIABLE_RESISTOR
T 41500 46400 5 10 1 1 0 0 1
refdes=R?
T 41700 47500 5 10 0 0 0 0 1
footprint=none
T 41200 45700 5 10 1 1 0 0 1
value=100k
T 41200 45400 5 10 1 1 0 0 1
description=K Gain (1->inf)
}
C 25900 48500 1 270 0 pot-2.sym
{
T 26800 47700 5 10 0 0 270 0 1
device=VARIABLE_RESISTOR
T 26300 47900 5 10 1 1 270 0 1
refdes=R?
T 27400 47700 5 10 0 0 270 0 1
footprint=none
T 25500 47900 5 10 1 1 0 0 1
value=20k
}
C 25800 49400 1 0 0 generic-power.sym
{
T 26000 49650 5 10 1 1 0 3 1
net=+10.7
}
C 26100 47300 1 0 1 gnd-1.sym
C 26100 48500 1 90 0 resistor-1.sym
{
T 25700 48800 5 10 0 0 90 0 1
device=RESISTOR
T 25800 48700 5 10 1 1 90 0 1
refdes=R?
T 25500 49100 5 10 1 1 0 0 1
value=10k
}
